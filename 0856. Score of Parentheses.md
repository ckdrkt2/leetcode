```python
class Solution:
    def scoreOfParentheses(self, s: str) -> int:
        a = []; ex = ''
        for i in s:
            if i == '(':
                a.append(0)
            else:
                if ex != i:
                    a[-1] += 1
                else:
                    b = 0
                    while a[-1] != 0: b += a.pop()
                    a[-1] = 2 * b
            ex = i
        return sum(a)
```

time complexity: O(N)
space complexity: O(1)

이전 값에 대한 기록을 통해 값을 계산하는 풀이입니다.
괄호가 열리게 되면 스택을 쌓습니다. 이후 괄호가 닫히게 될 때 값을 계산합니다.
만약 괄호가 열린 후 다음에 닫히면 현재 값을 스택 끝에 쌓아둡니다.
만약 괄호가 닫힌 후 닫히게 된다면 조건에 의한 내부 값의 2배 계산을 해야 하기 때문에 원래 위치 전까지의 값을 모두 더한 다음 2배를 하고 처음 스택에 추가해줍니다.
결과적으로 열린 괄호 안의 값을 닫힐 때 계산하고 그 내부에 있는 결과를 계속 스택에 저장하기 때문에 결과적으로 전체 계산을 할 수 있게 됩니다.
최종적으로 가장 밖에 있는 괄호들의 계산 값이 스택에 남아있게 되고 이들의 합을 통해 전체 값을 반환할 수 있습니다.